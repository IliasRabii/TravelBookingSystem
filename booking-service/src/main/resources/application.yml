spring:
  application:
    name: booking-service
  # --- Configuration de la base de donn�es ---
  datasource:
    url: jdbc:oracle:thin:@//localhost:1521/XEPDB1
    username: travel_app_user
    password: MON_MOT_DE_PASSE_DB
    driver-class-name: oracle.jdbc.OracleDriver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
# --- Configuration du port (� la racine, PAS sous "spring") ---
server:
  port: 8083
# --- Configuration Eureka (� la racine aussi) ---
# ... (Partie Spring/Server non modifi�e)

# --- Configuration Eureka Corrig�e ---
eureka:
  instance:
    prefer-ip-address: true
    ip-address: 127.0.0.1
  client:
    register-with-eureka: true
    fetch-registry: true
    service-url:
      defaultZone: http://127.0.0.1:8761/eureka/
resilience4j:
  circuitbreaker:
    instances:
      # Nom de l'instance du circuit breaker (nous l'utiliserons dans le code)
      bookingCircuitBreaker:
        # Taux d'erreur à partir duquel le disjoncteur s'ouvre (en %)
        failureRateThreshold: 50
        # Nombre minimal de requêtes pour commencer à calculer le taux d'erreur
        minimumNumberOfCalls: 5
        # Durée pendant laquelle le disjoncteur reste ouvert avant de tester (en secondes)
        waitDurationInOpenState: 10s
        # Nombre de requêtes autorisées en état semi-ouvert
        permittedNumberOfCallsInHalfOpenState: 3